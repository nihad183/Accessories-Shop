<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Products - Accessories Shop</title>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
/* ===== نسخة CSS الأصلية من products.html ===== */
body, html {
    margin:0; padding:0;
    font-family:'Poppins', sans-serif;
    min-height:100vh;
    background: url('shop.png') center/cover no-repeat fixed;
    color:#333;
}
.navbar {
  display:flex; justify-content:space-between; align-items:center;
  padding:15px 20px;
  background: rgba(0,0,0,0.4); backdrop-filter: blur(6px);
  position:sticky; top:0; z-index:1000; border-radius:0 0 12px 12px;
}
.nav-left { display:flex; align-items:center; gap:10px; }
.nav-left img { width:80px; }
.nav-left a { color:white; font-size:1.5rem; text-decoration:none; }
.nav-center h1 { margin:0; color:white; font-size:1.6rem; text-align:center; }
.nav-icons { position:relative; color:white; font-size:1.5rem; cursor:pointer; }
#cartCount {
  position:absolute; top:-8px; right:-10px;
  background:red; color:white; border-radius:50%;
  width:18px; height:18px; font-size:12px;
  display:flex; align-items:center; justify-content:center;
}
.product-row {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap:20px;
  padding:40px 20px;
}
.product-item {
  background: rgba(255,255,255,0.85);
  border-radius:15px;
  padding:15px;
  text-align:center;
  transition: transform 0.3s, box-shadow 0.3s;
}
.product-item:hover { transform:translateY(-5px); box-shadow:0 6px 20px rgba(0,0,0,0.2); }
.product-item img { width:110px; height:110px; border-radius:50%; object-fit:cover; margin-bottom:10px; }
.product-item p { margin:6px 0; }
.price { color:#e67e22; font-weight:bold; }
.icon-left { color:#e67e22; font-size:1.3rem; cursor:pointer; transition:color 0.3s; }
.icon-left:hover { color:#d35400; }
#cartPopup {
  display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(0.8);
  background:white; width:90%; max-width:420px; padding:20px;
  border-radius:15px; box-shadow:0 5px 25px rgba(0,0,0,0.3);
  z-index:9999; transition: all 0.3s ease;
}
#cartPopup.active { display:block; transform:translate(-50%,-50%) scale(1); }
#closeCart {
  position:absolute; top:8px; right:8px; background:#e67e22; color:white;
  border:none; border-radius:5px; padding:3px 8px; cursor:pointer;
}
#checkoutBtn, #confirmBtn {
  padding:10px 15px; background:#e67e22; color:white;
  border:none; border-radius:8px; width:100%; font-weight:bold; cursor:pointer;
  transition: background 0.3s;
}
#checkoutBtn:hover, #confirmBtn:hover { background:#cf6d17; }
input { width:100%; padding:8px; margin-bottom:12px; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition: border-color 0.3s; }
input:focus { border-color:#e67e22; outline:none; }
#successMessage {
  display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  background:#2ecc71; color:white; padding:20px 30px; border-radius:10px;
  font-size:1.1rem; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.3);
  animation: fadein 0.5s ease;
  z-index:99999;
}
@keyframes fadein { from { opacity:0; transform:translate(-50%,-60%); } to { opacity:1; transform:translate(-50%,-50%); } }
@media (max-width:600px){
  .nav-center h1 { font-size:1.2rem; }
  .product-item img { width:90px; height:90px; }
}
</style>
</head>
<body>

<div class="navbar">
  <div class="nav-left">
    <a href="index.html"><i class="fa-solid fa-arrow-left"></i></a>
    <img src="Byhouda.png" alt="Logo">
  </div>
  <div class="nav-center"><h1 id="categoryTitle">All Products</h1></div>
  <div class="nav-icons"><i class="fa-solid fa-cart-shopping"></i><span id="cartCount">0</span></div>
</div>

<div class="product-row" id="productRow"></div>

<div id="cartPopup">
  <button id="closeCart">X</button>
  <h3>Your Cart</h3>
  <div id="cartItems"></div>
  <p id="totalAmount"><strong>Total: 0 DZD</strong></p>
  <button id="checkoutBtn">Checkout</button>
</div>

<div id="successMessage">✅ تم إرسال طلبك بنجاح!</div>

<script>
// ✅ جميع المنتجات مع الفئات
const products = [
  {name:"Ring ", price:1200, image:"ring.jpg", category:"Ring"},
  {name:"Ring Flower", price:1500, image:"ringflower.jpg", category:"Ring"},

  {name:"Necklace butterfly ", price:1300, image:"necklace1.jpg", category:"Necklace"},
  {name:"Necklace Love ", price:1800, image:"necklace2.jpg", category:"Necklace"},

  {name:"Watch Casio", price:3000, image:"watch.jpg", category:"Watch"},
  {name:"Bracelet Closelove", price:1900, image:"bracelet1.jpg", category:"Bracelet"},
  {name:"Bracelet Clou", price:900, image:"bracelet2.jpg", category:"Bracelet"},

  {name:"Earring ", price:700, image:"Earrings.jpg", category:"Earring"},
];

// ✅ قراءة الفئة من الرابط
const params = new URLSearchParams(window.location.search);
const selectedCategory = params.get('category') || "All";

// ✅ عرض اسم الفئة في Navbar
document.getElementById('categoryTitle').textContent = selectedCategory;

// ✅ تصفية المنتجات حسب الفئة
const productRow = document.getElementById('productRow');
const filteredProducts = (selectedCategory === "All") ? products : products.filter(p => p.category === selectedCategory);

// ✅ إنشاء عناصر المنتجات
filteredProducts.forEach(p => {
  const div = document.createElement('div');
  div.className = 'product-item';
  div.innerHTML = `
    <img src="${p.image}" alt="${p.name}">
    <p>${p.name}</p>
    <p class="price">${p.price.toLocaleString()} DZD</p>
    <i class="fa-solid fa-cart-plus icon-left"></i>
  `;
  productRow.appendChild(div);
});

// ===== JS السلة =====
let cart = [];

function updateCart() {
  document.getElementById('cartCount').textContent = cart.length;
  let total = 0;
  let html = "";
  cart.forEach((item, i) => {
    html += `<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
      <div style="display:flex;align-items:center;gap:10px;">
        <img src="${item.image}" style="width:45px;height:45px;border-radius:5px;">
        <span>${item.name}</span>
      </div>
      <span>${item.price.toLocaleString()} DZD</span>
      <button onclick="removeItem(${i})" style="background:red;color:white;border:none;padding:2px 6px;border-radius:4px;cursor:pointer;">X</button>
    </div>`;
    total += item.price;
  });
  document.getElementById('cartItems').innerHTML = html;
  document.getElementById('totalAmount').innerHTML = `<strong>Total: ${total.toLocaleString()} DZD</strong>`;
}

function removeItem(i) { cart.splice(i,1); updateCart(); }

document.addEventListener('click', (e)=>{
  if(e.target.classList.contains('icon-left')){
    const card = e.target.closest('.product-item');
    const name = card.querySelector('p:first-of-type').textContent;
    const price = parseFloat(card.querySelector('.price').textContent.replace(/\D/g,''));
    const image = card.querySelector('img').src;
    if(!cart.find(p=>p.name===name)){
      cart.push({name, price, image});
      updateCart();
    } else alert('Product already in cart');
  }
});

// فتح وغلق السلة
document.querySelector('.nav-icons .fa-cart-shopping').addEventListener('click', ()=>{ document.getElementById('cartPopup').classList.toggle('active'); });
document.getElementById('closeCart').addEventListener('click', ()=>{ document.getElementById('cartPopup').classList.remove('active'); });

// Checkout تجريبي
document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  if(cart.length===0){ alert("Your cart is empty!"); return; }
  const popup = document.getElementById('cartPopup');
  popup.innerHTML = `
    <button id="closeCart">X</button>
    <h3>Enter Your Info</h3>
    <form id="checkoutForm">
      <input type="text" name="first_name" placeholder="First Name" required>
      <input type="text" name="last_name" placeholder="Last Name" required>
      <input type="text" name="phone" placeholder="Phone Number" required>
      <input type="text" name="wilaya" placeholder="Wilaya" required>
      <button id="confirmBtn" type="submit">Confirm Order</button>
    </form>
  `;
  document.getElementById('closeCart').addEventListener('click', ()=>{ popup.classList.remove('active'); });
  document.getElementById('checkoutForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    document.getElementById('successMessage').style.display = 'block';
    setTimeout(()=>{ document.getElementById('successMessage').style.display = 'none'; }, 3000);
    cart = [];
    updateCart();
    popup.classList.remove('active');
  });
});
</script>
</body>
</html>
